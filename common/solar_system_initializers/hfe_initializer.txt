#
# egypt
hfe_initializer_egypt_main = {
	prevent_anomalies = yes
	flags = {
		hfe_egypt_0
	}
	name = "Home of Light"
	class = sc_m
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 70
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 30			# The star is artificial
			max = 40			# The star is artificial
		}
		has_ring = no
		name = Ra
	}
	change_orbit = 70
	planet = {
		count = {
			min = 1
			max = 3
		}
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = random
	}
	planet = {
		count = {
			min = 0
			max = 2
		}
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 2
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		name = "Home of Light"
		class = pc_nuked
		modifiers = none
		deposit_blockers = none
		size = 25
		orbit_distance = 20
		orbit_angle = {
			min = 90
			max = 270
		}
		init_effect = {
			create_country = {
				name = "Ju Ahet"
				type = human_fallen_empire
				name_list = cybrxkhan_fantasy_egyptian
				ignore_initial_colony_error = yes
				species = event_target:hfe_egypt_species
				authority = auth_imperial
				ethos = {
					ethic = ethic_spiritualist
					ethic = ethic_authoritarian
					# need xenophobe to eat ahets
					ethic = ethic_xenophobe
				}
				civics = {
					civic = hfe_civic_egypt_genetic
					civic = hfe_civic_egypt_rulers
					civic = hfe_civic_egypt_sleep
				}
				origin = hfe_civic_egypt_rulers_origin
				effect = {
					save_global_event_target_as = hfe_egypt_country
					# Learned from Ra'ar
					set_graphical_culture = reptilian_01
					# Light blue/red/yellow
					set_city_graphical_culture = fallen_empire_03
					set_country_flag = hfe_egypt
					set_country_flag = hfe_assimilator_discovered
					set_country_flag = hfe_marked_as_human
					hfe_effect_create_fleet = yes
					kill_leader = {
						type = ruler
						show_notification = no
					}
					create_leader = {
						name = "Amonhirkhopshef Mutatistep"
						species = event_target:hfe_egypt_species
						class = ruler
						skill = 10
						leader_age_min = 250
						leader_age_max = 650
						gender = male
						traits = {
							trait = leader_trait_ruler_chosen
							trait = hfe_ruler_trait_transcendent_0
						}
					}
					assign_leader = last_created_leader
					if = {
						limit = {
							has_global_flag = HFE_TSP_spawn_test
						}
						log = "Ju Ahet actual country installed"
					}
				}
			}
			set_owner = event_target:hfe_egypt_country
			set_planet_flag = hfe_home_of_light
			set_capital = yes
			hfe_effect_init_set_pops_100 = yes
			# Generate Slave Ahets
			create_species = {
				name = "Ahet"
				plural = "Ahets"
				adjective = "Slave Ahet"
				class = REP
				portrait = rep12
				name_list = cybrxkhan_fantasy_egyptian
				pops_can_be_colonizers = yes
				can_generate_leaders = no
				pops_can_migrate = no
				# "Forever a slave" means forever a slave
				can_be_modified = no
				homeworld = this
				species_bio = "Through advanced genetic engineering and breeding, these Ahets were ripped of their Free Will. They were forced into eons of servitude, these Ahets are the descendants of the kidnappers of the Ju Ahet. Confined to Ju Ahet's core worlds, they serve their former chattel for all eternity. Dumbed down, docile, and quiet, they seek to serve a master even when they are not compelled to do so."
				traits = {
					ideal_planet_class = pc_tropical
					trait = hfe_species_trait_happy_slave
					trait = trait_docile
					trait = trait_strong
				}
				effect = {
					set_species_identity = event_target:hfe_ahet_species
					save_event_target_as = hfe_ahet_servant_species
				}
			}
			# Generate Delicious Ahets
			create_species = {
				name = "Delicious Ahet"
				plural = "Delicious Ahets"
				adjective = "Delicious Ahet"
				class = REP
				portrait = rep12
				name_list = cybrxkhan_fantasy_egyptian
				pops_can_be_colonizers = yes
				can_generate_leaders = no
				pops_can_migrate = no
				# "Forever a slave" means forever a slave
				can_be_modified = no
				homeworld = this
				species_bio = "Differentiating from the normal Ahet slaves in the Ju Ahet stock, these Ahets was made to be tasty, savory, yummy, palatable, appelitizing, toothsome, flavorous, gustable, sapid, sipid, savoury and yum-yum."
				traits = {
					ideal_planet_class = pc_tropical
					trait = trait_presapient_docile_livestock
					trait = trait_nerve_stapled
					trait = trait_delicious
				}
				effect = {
					set_species_identity = event_target:hfe_ahet_species
					set_species_flag = hfe_forever_slave
					save_event_target_as = hfe_ahet_delicious_species
				}
			}
			every_owned_pop = {
				# This is easier than creating a set number of Ju Ahets and set number of Ahets, the Pops "changed" are not transformed in-universe, obviously, so use your imagination and pretend they were never there
				random_list = {
					40 = {
					}
					10 = {
						change_species = event_target:hfe_ahet_servant_species
					}
					1 = {
						change_species = event_target:hfe_ahet_delicious_species
					}
				}
			}
			while = {
				count = 2
				create_pop = {
					species = event_target:hfe_ahet_delicious_species
				}
			}
			# story stuff
			add_deposit = hfe_deposit_egypt_0
			add_deposit = hfe_deposit_egypt_1
			add_deposit = hfe_deposit_egypt_2
			add_building = hfe_building_terraformer
			# generic buildings
			add_building = building_system_capital
			add_building = building_psi_corps
			add_building = building_master_archive
			add_building = building_fe_stronghold
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_affluence_center
			add_building = building_affluence_center
			add_building = building_nourishment_center
			add_building = building_nourishment_center
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_nano_forge
			while = {
				count = 30
				create_army = {
					owner = owner
					species = owner
					type = gene_warrior_army
				}
			}
			hfe_effect_create_starbase_citadel_with_buildings_from_planet = yes
		}
		change_orbit = @base_moon_distance
		moon = {
			name = "Heresy"
			class = pc_shattered
			orbit_angle = random
			orbit_distance = 5
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		orbit_distance = 20
		class = random
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 3
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Ju Ahet home system successfully spawned"
		}
		if = {
			limit = {
				exists = event_target:hfe_egypt_country
			}
			if = {
				limit = {
					has_global_flag = HFE_TSP_spawn_test
				}
				log = "All is well in Egypt"
			}
		}
	}
}

# hope
hfe_initializer_egypt_col_0 = {
	prevent_anomalies = yes
	flags = {
		hfe_egypt_1
	}
	class = rl_standard_stars
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 115
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 50
	planet = {
		name = Hope
		class = pc_continental
		modifiers = none
		deposit_blockers = none
		orbit_distance = 0
		orbit_angle = {
			min = 90
			max = 270
		}
		size = {
			min = 16
			max = 25
		}
		init_effect = {
			set_owner = event_target:hfe_egypt_country
			hfe_effect_init_set_pops_80 = yes
			every_owned_pop = {
				random_list = {
					60 = {
					}
					15 = {
						change_species = event_target:hfe_ahet_servant_species
					}
				}
			}
			while = {
				count = 5
				create_pop = {
					species = event_target:hfe_ahet_delicious_species
				}
			}
			add_building = building_system_capital
			add_building = building_psi_corps
			add_building = building_master_archive
			add_building = building_fe_stronghold
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_affluence_center
			add_building = building_affluence_center
			add_building = building_nourishment_center
			add_building = building_nourishment_center
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_nano_forge
			while = {
				count = 12
				create_pop = {
					species = event_target:hfe_ahet_servant_species
				}
			}
			hfe_effect_create_starbase_citadel_with_buildings_from_planet = yes
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 1
				max = 2
			}
			size = {
				min = 4
				max = 7
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		count = 2
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			size = 8
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	change_orbit = 25
	planet = {
		count = {
			min = 1
			max = 3
		}
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = {
			min = 40
			max = 110
		}
	}
	planet = {
		count = {
			min = 1
			max = 3
		}
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		name = "Hotep"
		orbit_distance = 20
		class = pc_gas_giant
		size = 40
		orbit_angle = {
			min = 90
			max = 270
		}
		#	 	change_orbit = @base_moon_distance
		# 		moon = {
		#	 		name = "Assimilation Zone"
		# 			class = pc_habitat
		# 			size = 20
		#	 		orbit_angle = {
		# 				min = 90
		# 				max = 270
		#	 		}
		# 			orbit_distance = 5
		# 			deposit_blockers = none
		#	 		init_effect = {
		# 				set_owner = event_target:hfe_egypt_country
		#	 			# TODO
		# 				add_building = building_system_capital
		# 				add_building = building_master_archive
		# 				add_building = building_fe_stronghold
		#	 			add_building = building_fe_dome
		# 				add_building = building_fe_dome
		#				add_building = building_fe_dome
		# 				add_building = building_class_4_singularity
		# 				add_building = building_class_4_singularity
		#	 			add_building = building_affluence_center
		# 				add_building = building_affluence_center
		# 				add_building = building_nourishment_center
		# 				add_building = building_nourishment_center
		#	 			add_building = building_dimensional_fabricator
		# 				add_building = building_dimensional_fabricator
		# 				add_building = building_nano_forge
		# 				add_building = building_nano_forge
		#	 			hfe_effect_init_set_pops_50 = yes
		# 				while = {
		# 					count = 25
		#	 				create_pop = {
		# 						species = event_target:hfe_ahet_servant_species
		# 					}
		# 				}
		# 			}
		#	 	}
	}
	planet = {
		orbit_distance = 20
		size = 20
		class = random
		orbit_angle = {
			min = 90
			max = 270
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "First Ju Ahet Colony spawned"
		}
	}
}

hfe_initializer_egypt_col_1 = {
	prevent_anomalies = yes
	flags = {
		hfe_egypt_2
	}
	class = rl_standard_stars
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 50
	planet = {
		name = Gift
		class = pc_continental
		modifiers = none
		deposit_blockers = none
		orbit_distance = 0
		orbit_angle = {
			min = 90
			max = 270
		}
		size = 25
		init_effect = {
			set_owner = event_target:hfe_egypt_country
			hfe_effect_init_set_pops_80 = yes
			every_owned_pop = {
				random_list = {
					40 = {
					}
					10 = {
						change_species = event_target:hfe_ahet_servant_species
					}
					1 = {
						change_species = event_target:hfe_ahet_delicious_species
					}
				}
			}
			# TODO
			add_building = building_system_capital
			add_building = building_psi_corps
			add_building = building_master_archive
			add_building = building_fe_stronghold
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_affluence_center
			add_building = building_affluence_center
			add_building = building_nourishment_center
			add_building = building_nourishment_center
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_nano_forge
			hfe_effect_create_starbase_citadel_with_buildings_from_planet = yes
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	change_orbit = 25
	planet = {
		count = {
			min = 2
			max = 4
		}
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 1
				max = 3
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = {
			min = 90
			max = 270
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Second Ju Ahet Colony spawned"
		}
	}
}

# ahet
hfe_initializer_ahet_0 = {
	prevent_anomalies = yes
	class = rl_standard_stars
	flags = {
		primitive_system
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 20
	planet = {
		orbit_distance = 20
		count = {
			min = 0
			max = 3
		}
	}
	change_orbit = 20
	planet = {
		orbit_distance = 0
		class = pc_tropical
		entity = hfe_entity_tropical_02_orange
		orbit_angle = {
			min = 90
			max = 270
		}
		size = {
			min = 15
			max = 25
		}
		init_effect = {
			set_planet_flag = hfe_ahet_colony_0
			create_country = {
				name = "Ahet Community"
				type = primitive
				authority = random
				ethos = {
					ethic = ethic_xenophile
					ethic = ethic_authoritarian
					ethic = ethic_pacifist
				}
				civics = {
					civic = hfe_civic_primitive_was_default
					civic = hfe_civic_primitive_fem_rept_lobby
				}
				species = event_target:hfe_ahet_species
				# not sure if it good idea
				origin = origin_lost_colony
				effect = {
					hfe_effect_primitive_set_late_medieval_age = yes
					set_country_flag = hfe_ahet_primitive_0
					if = {
						limit = {
							has_global_flag = HFE_TSP_spawn_test
						}
						log = "created ahets primitive 0"
					}
					prev = {
						# create_colony = {
						# 	owner = prev
						# }
						set_owner = prev
					}
					create_leader = {
						class = general
						species = event_target:hfe_ahet_species
						skill = 2
						effect = {
							save_event_target_as = hfe_ahet_general
						}
					}
				}
			}
			if = {
				limit = {
					has_global_flag = HFE_TSP_spawn_test
				}
				log = "Ahet Co-Op [this.GetName]"
			}
			# to remove errors from log
			event_target:hfe_ahet_species = {
				set_species_homeworld = prev
			}
			# to fix create colony spawn pop of root species bug
			every_owned_pop = {
				kill_pop = yes
			}
			hfe_effect_primitive_add_buildings = yes
			hfe_effect_primitive_add_pops = yes
			# TODO something wrong with it
			create_army = {
				name = "National Army of Pluan Zialeo"
				owner = owner
				species = owner
				type = industrial_army
				leader = event_target:hfe_ahet_general
			}
			create_army = {
				name = "1st Army of Nalvati Rokhever"
				owner = owner
				species = owner
				type = industrial_army
			}
			create_army = {
				name = "Holy Army of Holy Land"
				owner = owner
				species = owner
				type = primitive_army
			}
			create_army = {
				name = "Divine Valis of Archer"
				owner = owner
				species = owner
				type = primitive_army
			}
			create_army = {
				name = "Royal Army of Hadland"
				owner = owner
				species = owner
				type = primitive_army
			}
			create_army = {
				name = "Rebel Army of Pluan Zialeo"
				owner = owner
				species = owner
				type = primitive_army
			}
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		orbit_distance = 20
		count = {
			min = 1
			max = 4
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		orbit_distance = 20
		count = {
			min = 0
			max = 2
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Ahet Cooperative Colony spawned"
		}
	}
}

hfe_initializer_ahet_1 = {
	prevent_anomalies = yes
	class = rl_standard_stars
	flags = {
		primitive_system
	}
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 40
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 60
	planet = {
		orbit_distance = 20
		count = {
			min = 0
			max = 3
		}
	}
	planet = {
		name = Raarwr
		orbit_distance = 20
		class = pc_ocean
		entity = hfe_entity_ocean_03_orange
		orbit_angle = {
			min = 90
			max = 270
		}
		size = 25
		init_effect = {
			set_planet_flag = hfe_ahet_colony_1
			create_species = {
				name = Eterfoundite
				plural = Eterfoundites
				adjective = Eterfoundite
				class = random
				blocked_archetypes = {
					MACHINE
					ROBOT
					PRESAPIENT
				}
				homeworld = this
				species_bio = "The Eterfoundites got their name from the Ahet refugees that they share the planet with. After the fall of the Ahet dominions in their species' apocalyptic war, or maybe plague, the Ahets that survived desparately fled in ships and cargo holds to find somewhere, anywhere to go. The Ahets that landed on Raarwr were in luck: the kind Eterfoundites welcomed them with open arms and accepted them as equals. They now live peacefully together in a quaint, primitive democracy of elders and nobles."
				traits = {
					trait = trait_conformists
					trait = trait_social_pheromones
				}
			}
			create_country = {
				name = "Eternal Foundation"
				type = primitive
				authority = auth_democratic
				ethos = {
					ethic = ethic_fanatic_xenophile
					ethic = ethic_pacifist
				}
				civics = {
					civic = hfe_civic_primitive_degraded_tech
					civic = hfe_civic_primitive_was_default
				}
				species = last_created_species
				origin = origin_lost_colony
				effect = {
					set_graphical_culture = fallen_empire_03
					hfe_effect_primitive_set_steam_age = yes
					set_city_graphical_culture = preindustrial_01
					set_country_flag = hfe_ahet_primitive_1
					prev = {
						# create_colony = {
						# 	owner = prev
						# }
						set_owner = prev
					}
					create_leader = {
						class = general
						species = this
						skill = 2
						effect = {
							save_event_target_as = hfe_ahet_general
						}
					}
				}
			}
			# to fix create colony spawn pop of root species bug
			every_owned_pop = {
				kill_pop = yes
			}
			hfe_effect_primitive_add_buildings = yes
			hfe_effect_primitive_add_pops = yes
			every_owned_pop = {
				random_list = {
					10 = {
					}
					10 = {
						change_species = event_target:hfe_ahet_species
					}
				}
			}
			create_army = {
				owner = owner
				species = owner
				type = industrial_army
				leader = event_target:hfe_ahet_general
			}
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		orbit_distance = 20
		count = {
			min = 1
			max = 4
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		orbit_distance = 20
		count = {
			min = 0
			max = 2
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Ahet Refugees spawned"
		}
	}
}

# varelse
hfe_initializer_varelse = {
	# The Varelse were once a Fallen Empire
	name = "Deprived"
	class = sc_k
	flags = {
		primitive_system
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 25
			max = 30
		}
		has_ring = no
		satellite_naming_policy = upper_case_roman_numerals
	}
	change_orbit = 23
	planet = {
		orbit_distance = 20
		count = 1
		class = pc_molten
	}
	change_orbit = 36
	planet = {
		name = "Colony Beta"
		orbit_distance = 0
		class = pc_desert
		entity = hfe_entity_arid_01_brown
		orbit_angle = {
			min = 90
			max = 270
		}
		size = 32
		modifiers = none
		# deposit_blockers = none
		init_effect = {
			save_global_event_target_as = hfe_varelse_colony_planet
			create_species = {
				name = "Godforge Drone"
				plural = "Godforge Drones"
				adjective = "Godforge Engine"
				class = ROBOT
				namelist = cybrxkhan_fantasy_egyptian
				# I actually love this type and they are not ugly at all
				portrait = sd_pla_robot
				species_bio = "These ugly, huge machines are the result of imperfect, ancient manufacturing processes deep within the Godforge. For some reason, the complex constantly spits out drones for its use."
				# extra_trait_points = 2
				traits = {
					trait = "trait_mechanical"
					trait = "trait_robot_bulky"
					trait = "trait_robot_uncanny"
					trait = "trait_robot_custom_made"
					trait = "trait_robot_high_bandwidth"
					trait = "trait_robot_domestic_protocols"
				}
				effect = {
					save_event_target_as = hfe_varelse_leftover_robots
					set_citizenship_type = {
						type = citizenship_robot_servitude
					}
				}
			}
			create_country = {
				name = "Cult of the Machine-That-Speaks-to-God"
				ship_prefix = "Godforge"
				type = primitive
				ignore_initial_colony_error = yes
				species = event_target:hfe_varelse_species
				origin = origin_remnants
				authority = auth_dictatorial
				ethos = {
					ethic = ethic_militarist
					ethic = ethic_xenophobe
					ethic = ethic_spiritualist
				}
				civics = {
					# Later changed by Event
					civic = hfe_civic_primitive_was_default
					civic = hfe_civic_godforge
				}
				effect = {
					hfe_effect_primitive_set_machine_age = yes
					set_country_flag = hfe_varelse_primitive_0
					set_country_flag = hfe_varelse
					prev = {
						set_owner = prev
					}
					set_policy = {
						policy = robot_pop_policy
						option = robot_pops_allowed
						cooldown = no
					}
					#set_built_species = event_target:hfe_varelse_leftover_robots
					# really neeed it?
					# kill_leader = {
					# 	type = ruler
					# 	show_notification = no
					# }
					create_leader = {
						class = ruler
						name = "The Master"
						species = event_target:hfe_varelse_species
						gender = male
						immortal = yes
						skill = 5
						leader_age_max = 500
						leader_age_min = 100
						traits = {
							add_trait = leader_trait_ruler_cyborg
							add_trait = hfe_ruler_trait_cult_of_personality
							add_trait = leader_trait_substance_abuser
							add_trait = leader_trait_corrupt
						}
					}
					assign_leader = last_created_leader
					create_leader = {
						name = "Damaged Godforge Core"
						class = general
						event_leader = yes
						species = event_target:hfe_varelse_leftover_robots
						immortal = yes
						skill = 3
						leader_age_max = 3000
						leader_age_min = 1000
						traits = {
							add_trait = leader_trait_general_synthetic
							add_trait = leader_trait_maimed
						}
						effect = {
							save_event_target_as = hfe_varelse_general
						}
					}
				}
			}
			event_target:hfe_varelse_species = {
				set_species_homeworld = prev
			}
			set_planet_flag = hfe_varelse_colony
			add_building = hfe_building_godforge_main
			add_building = hfe_building_godforge_stronghold
			add_building = hfe_building_godforge_temple
			hfe_effect_primitive_add_buildings = yes
			# remove_building = building_primitive_capital
			# add_building = hfe_building_mechanicus_pseudo_capital
			add_deposit = hfe_deposit_godforge_farm
			add_deposit = d_bomb_crater
			add_deposit = d_decrepit_dwellings
			# add_deposit = d_dust_caverns
			# add_deposit = d_dust_caverns
			# add_deposit = d_geothermal_vent
			# add_deposit = d_ore_rich_caverns
			# add_deposit = d_veiny_cliffs
			# add_deposit = d_rich_mountain
			# add_deposit = d_fungal_caves
			add_deposit = d_relic_metal_boneyard
			add_deposit = d_ancient_bombardment_craters
			# add_random_non_blocker_deposit = yes
			# add_random_non_blocker_deposit = yes
			# add_random_non_blocker_deposit = yes
			hfe_effect_primitive_add_pops = yes
			# extra pops
			while = {
				count = 15
				create_pop = {
					species = owner
				}
			}
			while = {
				count = 15
				create_pop = {
					species = event_target:hfe_varelse_leftover_robots
				}
			}
			add_modifier = {
				modifier = hfe_colony_type_varelse
				days = -1
			}
			add_modifier = {
				modifier = bleak_planet
				days = -1
			}
			add_modifier = {
				modifier = high_gravity
				days = -1
			}
			# war blockers
			while = {
				count = 30
				create_army = {
					name = "Zealots"
					owner = owner
					species = event_target:hfe_varelse_species
					type = hfe_army_godforge_zealots
				}
			}
			while = {
				count = 15
				create_army = {
					name = "Instruments of the Machine"
					owner = owner
					species = event_target:hfe_varelse_leftover_robots
					type = hfe_army_godforge_drones
				}
			}
			while = {
				count = 5
				create_army = {
					name = "Godforge Sentinels"
					owner = owner
					species = event_target:hfe_varelse_leftover_robots
					type = hfe_army_godforge_core_watch
				}
			}
			while = {
				count = 3
				create_army = {
					name = "Adaptus Mechanicus"
					owner = owner
					species = event_target:hfe_varelse_species
					type = robotic_defense_army
				}
			}
			create_army = {
				name = "The Master's Personal Guard"
				owner = owner
				species = event_target:hfe_varelse_species
				type = hfe_army_godforge_bodyguards
			}
			create_army = {
				name = "The Machine-That-Speaks-to-God"
				owner = owner
				species = event_target:hfe_varelse_leftover_robots
				type = care_defensive_protocols
				leader = event_target:hfe_varelse_general
			}
			if = {
				limit = {
					has_global_flag = HFE_TSP_spawn_test
				}
				log = "Colony Beta planet finalized"
			}
		}
	}
	change_orbit = 5
	planet = {
		orbit_distance = 15
		class = pc_barren_cold
		count = 1
		moon = {
			class = random
			orbit_distance = @base_moon_distance
		}
	}
	change_orbit = 5
	planet = {
		orbit_distance = 15
		class = pc_frozen
		size = 18
		count = 1
	}
	change_orbit = 40
	planet = {
		#		orbit_distance = 0
		class = pc_t_star
		size = 34
		orbit_angle = random
		change_orbit = @base_moon_distance
		moon = {
			class = pc_frozen
			count = 6
			orbit_angle = random
			orbit_distance = 4
		}
		satellite_naming_policy = upper_case_roman_numerals
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Colony Beta completely spawned"
		}
	}
}

# ahet home
hfe_initializer_ahet_home = {
	class = rl_standard_stars
	flags = {
		hfe_ahet_home
		hfe_ahet_home_star
	}
	name = Barsoom
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 20
	planet = {
		count = 1
		orbit_distance = 20
	}
	planet = {
		count = 1
		class = random
		size = 14
	}
	change_orbit = 22
	planet = {
		orbit_distance = 0
		name = "Our Happy Ending"
		class = hfe_pc_ahet_home
		has_ring = yes
		orbit_angle = {
			min = 90
			max = 270
		}
		size = 35
		satellite_naming_policy = upper_case_roman_numerals
		modifiers = none
		deposit_blockers = none
		init_effect = {
			prevent_anomaly = yes
			set_planet_flag = hfe_ahet_home
			add_modifier = {
				modifier = lush_planet
				days = -1
			}
			add_modifier = {
				modifier = natural_beauty
				days = -1
			}
			add_modifier = {
				modifier = high_gravity
				days = -1
			}
		}
		change_orbit = 5
		moon = {
			count = 1
			name = "Collapsed Dimensional Portal I"
			class = pc_black_hole
			size = 1
			orbit_angle = {
				min = 0
				max = 90
			}
			orbit_distance = 2.2
			modifiers = none
			init_effect = {
				add_deposit = d_engineering_9
				prevent_anomaly = yes
			}
			has_ring = yes
		}
		moon = {
			count = 1
			name = "Collapsed Dimensional Portal IV"
			class = pc_black_hole
			size = 1
			orbit_angle = random
			orbit_distance = 2.6
			modifiers = none
			init_effect = {
				add_deposit = d_physics_6
				prevent_anomaly = yes
			}
			has_ring = yes
		}
	}
	change_orbit = 9
	planet = {
		count = 1
		#has_ring = yes
		change_orbit = 1
		class = random
		size = 23
		moon = {
			count = 3
			orbit_angle = {
				min = 140
				max = 195
			}
			size = 13
			orbit_distance = 5.5
			has_ring = no
		}
	}
	change_orbit = 10
	planet = {
		orbit_distance = 4
		count = 1
		has_ring = yes
		change_orbit = 5
		class = pc_barren_cold
	}
	change_orbit = 10
	planet = {
		orbit_distance = 3
		count = 1
		has_ring = yes
		change_orbit = 5
		class = pc_frozen
	}
	change_orbit = 10
	planet = {
		orbit_distance = 20
		count = 1
		class = pc_gas_giant
		size = 33
		has_ring = yes
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Ahet Happy Ending spawned"
		}
	}
}

# memorial
hfe_initializer_memorial_0 = {
	class = rl_standard_stars
	flags = {
		hfe_memorial_system
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 45
	planet = {
		name = Arrakis
		orbit_distance = 30
		class = hfe_pc_memorial
		orbit_angle = {
			min = 90
			max = 270
		}
		size = {
			min = 20
			max = 25
		}
		deposit_blockers = none
		init_effect = {
			prevent_anomaly = yes
		}
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 10
		}
	}
	planet = {
		count = {
			min = 2
			max = 10
		}
		orbit_distance = 20
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Memorial World spawned"
		}
	}
}

hfe_initializer_memorial_1 = {
	class = rl_standard_stars
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}
	flags = {
		hfe_memorial_system
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 30
	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = {
			min = 90
			max = 270
		}
	}
	change_orbit = 25
	planet = {
		count = {
			min = 1
			max = 4
		}
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = {
			min = 90
			max = 270
		}
	}
	planet = {
		name = Caladan
		orbit_distance = 25
		class = hfe_pc_memorial
		orbit_angle = {
			min = 90
			max = 270
		}
		size = {
			min = 20
			max = 25
		}
		deposit_blockers = none
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 10
		}
		init_effect = {
			prevent_anomaly = yes
		}
	}
	planet = {
		count = {
			min = 2
			max = 5
		}
		orbit_distance = 30
		orbit_angle = {
			min = 90
			max = 270
		}
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 0
				max = 1
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Memorial World spawned"
		}
	}
}

hfe_initializer_memorial_2 = {
	prevent_anomalies = yes
	class = rl_standard_stars
	flags = {
		hfe_memorial_system
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	change_orbit = 45
	planet = {
		name = "Giedi Prime"
		orbit_distance = 10
		class = hfe_pc_memorial
		orbit_angle = {
			min = 90
			max = 270
		}
		size = {
			min = 20
			max = 25
		}
		deposit_blockers = none
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random_non_colonizable
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 10
		}
		init_effect = {
			prevent_anomaly = yes
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		orbit_distance = 60
		class = pc_gas_giant
		orbit_angle = {
			min = 90
			max = 270
		}
		size = 25
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 1
				max = 4
			}
			size = {
				min = 8
				max = 20
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 6
		}
	}
	change_orbit = 20
	planet = {
		count = {
			min = 0
			max = 2
		}
		orbit_distance = 20
		orbit_angle = {
			min = 90
			max = 270
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Memorial World spawned"
		}
	}
}

hfe_initializer_memorial_3 = {
	prevent_anomalies = yes
	class = rl_standard_stars
	flags = {
		hfe_memorial_system
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}
	change_orbit = 40
	planet = {
		name = Kaitain
		orbit_distance = 10
		class = hfe_pc_memorial
		orbit_angle = {
			min = 90
			max = 270
		}
		size = {
			min = 20
			max = 25
		}
		deposit_blockers = none
		moon = {
			count = {
				min = 0
				max = 1
			}
			class = random
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 10
		}
		init_effect = {
			prevent_anomaly = yes
		}
	}
	planet = {
		count = {
			min = 0
			max = 2
		}
		orbit_distance = 20
		orbit_angle = {
			min = 90
			max = 270
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Memorial World spawned"
		}
	}
}

# copernicus
hfe_initializer_copernicus = {
	prevent_anomalies = yes
	class = hfe_sc_copernicus
	flags = {
		hfe_copernicus
		primitive_system
	}
	name = Copernicus
	planet = {
		name = "Copernicus B"
		class = star
		orbit_distance = 13
		orbit_angle = 210
		size = 3
		init_effect = {
			set_planet_flag = hfe_copernicus.2
			set_planet_flag = hfe_handmade_garden
			if = {
				limit = {
					has_global_flag = HFE_TSP_spawn_test
				}
				log = "Geocentrism wasn't wrong"
			}
		}
	}
	planet = {
		name = "Copernicus A"
		orbit_distance = -12
		orbit_angle = 30
		class = pc_gaia
		entity = hfe_entity_gaia_pink
		size = 25
		init_effect = {
			if = {
				limit = {
					has_global_flag = HFE_TSP_spawn_test
				}
				log = "Geocentric core planet spawned"
			}
			set_planet_flag = hfe_copernicus.0
			set_planet_flag = hfe_handmade_garden
			save_global_event_target_as = hfe_corpernicus_preserve
			create_species = {
				name = "Blessox"
				plural = "Blessoxen"
				adjective = "Blessed"
				class = random_non_machine
				blocked_archetypes = {
					MACHINE
					ROBOT
				}
				homeworld = this
				name_list = ART4				# Same as Ahets
				traits = random
				traits = {
					trait = trait_presapient_natural_intellectuals
					trait = trait_docile
				}
				# It can be presumed these creatures were modified
				#				is_mod = yes
				allow_negative_traits = no
			}
			create_country = {
				name = "Geocentric Sanctuary"
				authority = auth_dictatorial
				name_list = REP1
				ship_prefix = "Geocentric"
				civics = {
					civic = civic_secret_of_fire
					civic = civic_the_wheel
				}
				ethos = {
					ethic = ethic_fanatic_spiritualist
					ethic = ethic_xenophile
				}
				species = last_created_species
				type = primitive
				origin = origin_enlightened
				effect = {
					hfe_effect_primitive_set_stone_age = yes
					prev = {
						# create_colony = {
						# 	owner = prev
						# }
						set_owner = prev
					}
				}
			}
			# to fix create colony spawn pop of root species bug
			every_owned_pop = {
				kill_pop = yes
			}
			hfe_effect_primitive_add_buildings = yes
			hfe_effect_primitive_add_pops = yes
			if = {
				limit = {
					has_global_flag = HFE_TSP_spawn_test
				}
				log = "Corpernicus Primitives spawned"
			}
		}
		planet = {
			class = pc_rare_crystal_asteroid
			size = 20
			orbit_distance = 200
			orbit_angle = random
			init_effect = {
				set_planet_flag = hfe_copernicus.1
				if = {
					limit = {
						has_global_flag = HFE_TSP_spawn_test
					}
					log = "Corpernicus computation asteroid spawned"
				}
			}
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Ptolemy of Alexandria did nothing wrong"
		}
	}
}

# drone
hfe_initializer_drone_sector_0 = {
	prevent_anomalies = yes
	flags = {
		hostile_system
		hfe_drone_home_system
	}
	class = rl_standard_stars
	name = "Drone Sector 0"
	asteroid_belt = {
		type = crystal_asteroid_belt
		radius = 100
	}
	asteroid_belt = {
		type = crystal_asteroid_belt
		radius = 110
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 10
			max = 20
		}
	}
	change_orbit = 100
	planet = {
		count = 3
		class = pc_rare_crystal_asteroid
		orbit_distance = 0
		orbit_angle = random
	}
	change_orbit = 10
	planet = {
		count = 5
		class = pc_rare_crystal_asteroid
		orbit_distance = 0
		orbit_angle = random
	}
	change_orbit = 25
	planet = {
		count = 1
		class = pc_gas_giant
		orbit_distance = 20
		orbit_angle = random
		change_orbit = @base_moon_distance
		moon = {
			count = 1
			orbit_angle = {
				min = 90
				max = 270
			}
			class = pc_broken
			orbit_distance = 5
		}
	}
	change_orbit = 5
	planet = {
		name = "Treasure Zone"
		class = pc_broken
		size = 39
		has_ring = yes
		modifiers = none
		orbit_distance = 5
		orbit_angle = random
		init_effect = {
			set_deposit = hfe_deposit_drone_treasure
		}
	}
	change_orbit = 7
	planet = {
		count = {
			min = 1
			max = 2
		}
		class = pc_broken
		orbit_distance = 30
		orbit_angle = random
	}
	init_effect = {
		# some generic machine species
		create_species = {
			class = MACHINE
			traits = {
				trait = trait_machine_unit
				trait = random_traits
			}
			effect = {
				save_event_target_as = hfe_drone_species
			}
		}
		create_country = {
			name = "Harvesting Branch 42"
			name_list = AI
			species = event_target:hfe_drone_species
			type = hfe_drone
			day_zero_contact = no
			# need machine species to work
			authority = auth_machine_intelligence
			ethos = {
				ethic = ethic_gestalt_consciousness
			}
			flag = {
				icon = {
					category = "zoological"
					file = "flag_zoological_1.dds"
				}
				background = {
					category = "backgrounds"
					file = "horizontal_stripe.dds"
				}
				colors = {
					"black"
					"dark_brown"
					"dark_brown"
					"brown"
				}
			}
			effect = {
				save_global_event_target_as = hfe_drone_country
				set_graphical_culture = hfe_graphical_culture_drone
				give_technology = {
					message = no
					tech = tech_cruisers
				}
				give_technology = {
					message = no
					tech = tech_destroyers
				}
				give_technology = {
					message = no
					tech = tech_mining_drone_weapon_1
				}
				# love primitives lorewise, love enclaves and leviathans to not ruin player experience
				every_country = {
					limit = {
						or = {
							is_country_type = primitive
							is_country_type = enclave
							is_guardian_country = yes
						}
					}
					set_faction_hostility = {
						target = prev
						set_hostile = no
						set_neutral = yes
						set_friendly = no
					}
				}
				# from 2.8 ai want to build shipyard first
				add_resource = {
					alloys = 500
				}
			}
		}
		hfe_effect_add_hyperlanes = yes
		create_starbase = {
			size = starbase_outpost
			owner = event_target:hfe_drone_country
		}
		starbase = {
			set_starbase_size = starbase_citadel
		}
		every_system_planet = {
			limit = {
				has_deposit = no
			}
			if = {
				limit = {
					is_asteroid = yes
				}
				hfe_effect_set_mineral_orbital_deposit = yes
			}
			else_if = {
				limit = {
					or = {
						is_star = yes
						is_planet_class = pc_gas_giant
					}
				}
				hfe_effect_set_energy_orbital_deposit = yes
			}
		}
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Harvesting Marvel Core activated"
		}
	}
}

hfe_initializer_drone_sector_1 = {
	prevent_anomalies = yes
	flags = {
		hostile_system
		hfe_drone_home_system
		hfe_drone_economic_zone
	}
	class = sc_k
	name = "Drone Sector 1"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 60
	}
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 150
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 10
			max = 20
		}
		init_effect = {
			add_deposit = d_trade_value_8
			create_ambient_object = {
				type = caravaneer_billboard_1
				scale = 4
				location = this
				entity_offset_height = {
					min = -9
					max = -11
				}
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 40
					angle = 45
				}
			}
			create_ambient_object = {
				type = caravaneer_billboard_3
				scale = 4
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 4
					angle = random
				}
			}
		}
	}
	change_orbit = 60
	planet = {
		count = {
			min = 2
			max = 8
		}
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = random
	}
	change_orbit = 90
	planet = {
		count = {
			min = 2
			max = 8
		}
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = random
	}
	change_orbit = -100
	change_orbit = 30
	planet = {
		class = pc_gas_giant
		orbit_distance = 20
		orbit_angle = random
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 1
				max = 3
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
		init_effect = {
			create_ambient_object = {
				type = caravaneer_billboard_1
				scale = 4
				location = this
				entity_offset_height = {
					min = -9
					max = -11
				}
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 18
					angle = random
				}
			}
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		class = random_non_colonizable
		orbit_distance = 20
		orbit_angle = random
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		create_starbase = {
			size = starbase_outpost
			owner = event_target:hfe_drone_country
		}
		starbase = {
			set_starbase_size = starbase_citadel
		}
		every_system_planet = {
			limit = {
				has_deposit = no
			}
			if = {
				limit = {
					is_asteroid = yes
				}
				hfe_effect_set_mineral_orbital_deposit = yes
			}
			else_if = {
				limit = {
					or = {
						is_star = yes
						is_planet_class = pc_gas_giant
					}
				}
				hfe_effect_set_energy_orbital_deposit = yes
			}
		}
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Harvesting Marvel Zone activated"
		}
	}
}

hfe_initializer_drone_sector_2 = {
	prevent_anomalies = yes
	flags = {
		hostile_system
		hfe_drone_home_system
	}
	class = rl_standard_stars
	name = "Drone Sector 10"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 40
	}
	asteroid_belt = {
		type = icy_asteroid_belt
		radius = 200
	}
	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
	}
	change_orbit = 40
	planet = {
		count = {
			min = 4
			max = 5
		}
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = random
	}
	change_orbit = 160
	planet = {
		count = 3
		class = pc_ice_asteroid
		orbit_distance = 0
		orbit_angle = random
	}
	change_orbit = -140
	planet = {
		count = {
			min = 1
			max = 2
		}
		class = pc_gas_giant
		orbit_distance = 20
		change_orbit = @base_moon_distance
		moon = {
			count = {
				min = 1
				max = 2
			}
			orbit_angle = {
				min = 90
				max = 270
			}
			orbit_distance = 5
		}
	}
	planet = {
		count = {
			min = 1
			max = 2
		}
		class = random_non_colonizable
		orbit_distance = 30
		orbit_angle = random
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		create_starbase = {
			size = starbase_outpost
			owner = event_target:hfe_drone_country
		}
		starbase = {
			set_starbase_size = starbase_citadel
		}
		every_system_planet = {
			limit = {
				has_deposit = no
			}
			if = {
				limit = {
					is_asteroid = yes
				}
				hfe_effect_set_mineral_orbital_deposit = yes
			}
			else_if = {
				limit = {
					or = {
						is_star = yes
						is_planet_class = pc_gas_giant
					}
				}
				hfe_effect_set_energy_orbital_deposit = yes
			}
		}
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Harvesting Marvel Zone activated"
		}
	}
}

# future
hfe_initializer_future_main = {
	spawn_chance = 0
	prevent_anomalies = yes
	name = Tartarus
	class = rl_binary_stars
	asteroid_belt = {
		type = crystal_asteroid_belt
		radius = 70
	}
	flags = {
		hfe_future_system
		hfe_future_core
	}
	planet = {
		name = Tartarus
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = {
			min = 20
			max = 30
		}
		has_ring = no
	}
	planet = {
		name = Typhon
		class = star
		orbit_distance = 50
		orbit_angle = {
			min = 90
			max = 270
		}
		size = {
			min = 8
			max = 14
		}
		has_ring = no
	}
	change_orbit = 20
	planet = {
		count = {
			min = 2
			max = 6
		}
		class = pc_rare_crystal_asteroid
		orbit_angle = {
			min = 40
			max = 100
		}
		orbit_distance = 0
	}
	planet = {
		name = "Tellus"
		class = pc_gas_giant
		orbit_distance = 60
		orbit_angle = 200
		size = 40
		has_ring = yes
		change_orbit = @base_moon_distance
		moon = {
			name = "Terra Nova"
			class = pc_gaia
			entity = hfe_entity_gaia_orange
			size = 25
			orbit_distance = 20
			orbit_angle = 20
			modifiers = none
			deposit_blockers = none
			init_effect = {
				set_planet_flag = hfe_handmade_garden
				set_planet_flag = hfe_future_planet
				create_country = {
					name = "Kad Republic"
					type = human_fallen_empire
					name_list = HUMAN1
					ship_prefix = "Diplomat"
					origin = hfe_civic_future_peaceful
					ignore_initial_colony_error = yes
					ethos = {
						ethic = ethic_fanatic_pacifist
						ethic = ethic_xenophile
					}
					authority = auth_democratic
					civics = {
						civic = hfe_civic_future_virtual_sleep
						civic = hfe_civic_future_comand_sleep
						civic = civic_diplomatic_corps
					}
					species = event_target:hfe_future_species
					flag = {
						icon = {
							category = hfe_emblem
							file = hfe_emblem_future.dds
						}
						background = {
							category = backgrounds
							file = vertical.dds
						}
						colors = {
							"turquoise"
							"black"
							"pink"
							"red"
						}
					}
					effect = {
						set_country_flag = hfe_future
						set_country_flag = hfe_brainworm_discovered
						set_country_flag = hfe_marked_as_human
						save_global_event_target_as = hfe_future_country
						save_global_event_target_as = hfe_coalition_leader
						hfe_effect_create_fleet = yes
					}
				}
				set_owner = event_target:hfe_future_country
				set_capital = yes
				add_building = hfe_building_virtual
				# TODO
				add_building = building_system_capital
				add_building = building_fe_stronghold
				add_building = building_fe_dome
				add_building = building_fe_dome
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_affluence_center
				add_building = building_affluence_center
				add_building = building_nourishment_center
				add_building = building_nourishment_center
				add_building = building_dimensional_fabricator
				add_building = building_dimensional_fabricator
				add_building = building_nano_forge
				add_building = building_nano_forge
				hfe_effect_init_set_pops_100 = yes
				while = {
					count = 30
					create_army = {
						name = "Protectors of the Innocent"
						owner = owner
						species = owner
						type = defense_army
					}
				}
				hfe_effect_create_starbase_citadel_with_buildings_from_planet = yes
			}
		}
		moon = {
			name = "Nova Futurum"
			class = pc_gaia
			entity = hfe_entity_gaia_purple
			size = 20
			orbit_distance = 8
			orbit_angle = 10
			modifiers = none
			deposit_blockers = none
			init_effect = {
				set_planet_flag = hfe_handmade_garden
				set_planet_flag = hfe_future_planet
				set_owner = event_target:hfe_future_country
				add_building = hfe_building_virtual
				add_building = building_system_capital
				add_building = building_fe_stronghold
				add_building = building_fe_dome
				add_building = building_fe_dome
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_affluence_center
				add_building = building_affluence_center
				add_building = building_nourishment_center
				add_building = building_nourishment_center
				add_building = building_dimensional_fabricator
				add_building = building_dimensional_fabricator
				add_building = building_nano_forge
				add_building = building_nano_forge
				hfe_effect_init_set_pops_100 = yes
			}
		}
	}
	init_effect = {
		hfe_effect_add_hyperlanes = yes
		if = {
			limit = {
				has_global_flag = HFE_TSP_spawn_test
			}
			log = "Kad Republic spawned"
		}
	}
}
