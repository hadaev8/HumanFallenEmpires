#
# exodus
hfe_decision_features_exodus = {
	owned_planets_only = yes
	sound = event_red_alert
	icon = decision_landing_ship
	resources = {
		category = decisions
		cost = {
			trigger = {
				hfe_trigger_owner_is_gestalt = no
			}
			food = 5
			consumer_goods = 5
			mult = trigger:num_pops
		}
		cost = {
			trigger = {
				hfe_trigger_owner_is_biohive = yes
			}
			food = 10
			mult = trigger:num_pops
		}
		cost = {
			trigger = {
				hfe_trigger_owner_is_robohive = yes
			}
			energy = 10
			mult = trigger:num_pops
		}
	}
	prerequisites = {
		hfe_tech_features_exodus
	}
	potential = {
		exists = owner
		owner = {
			is_ai = no
		}
	}
	allow = {
		exists = owner
		# The Exodus is an emergency to deliver an OPM from death
		owner = {
			num_owned_planets = 1
		}
	}
	effect = {
		owner = {
			save_event_target_as = hfe_features_exodus_country
		}
		save_event_target_as = hfe_features_exodus_capital
		custom_tooltip = buildable_colony_ship
		hfe_effect_features_exodus_setup = yes
	}
	ai_weight = {
		weight = 0
	}
}

# human 2 extended
hfe_decision_features_human_2_extended_fix_corruption = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_politics
	enactment_time = 720
	resources = {
		category = decisions
		cost = {
			unity = 500
			influence = 50
		}
	}
	potential = {
		has_modifier = hfe_features_human_2_extended_corruption
		exists = owner.ruler
	}
	allow = {
		owner.ruler = {
			nor = {
				# has_trait = hfe_leader_trait_corrupted
				has_trait = leader_trait_corrupt
				has_trait = leader_trait_corrupt_2
			}
		}
	}
	effect = {
		remove_modifier = hfe_features_human_2_extended_corruption
		add_modifier = {
			modifier = hfe_features_human_2_extended_unhappy_officials
			years = 10
		}
		random_deposit = {
			limit = {
				or = {
					is_deposit_type = hfe_deposit_features_human_2_extended_industrial_0
					is_deposit_type = hfe_deposit_features_human_2_extended_industrial_1
					is_deposit_type = hfe_deposit_features_human_2_extended_industrial_2
				}
			}
			custom_tooltip = hfe_decision_features_human_2_extended_fix_corruption_tooltip
		}
		if = {
			limit = {
				exists = owner
			}
			owner = {
				every_owned_leader = {
					limit = {
						or = {
							# has_trait = hfe_leader_trait_corrupted
							has_trait = leader_trait_corrupt
							has_trait = leader_trait_corrupt_2
						}
					}
					kill_leader = {
						fire = yes
					}
				}
			}
		}
	}
	ai_weight = {
		weight = 1
	}
}

hfe_decision_features_human_2_extended_fix_inequality = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_politics
	enactment_time = 720
	resources = {
		category = decisions
		cost = {
			unity = 500
			influence = 50
		}
	}
	potential = {
		has_modifier = hfe_features_human_2_extended_inequality
	}
	effect = {
		remove_modifier = hfe_features_human_2_extended_inequality
		add_modifier = {
			modifier = hfe_features_human_2_extended_dignity
			years = 10
		}
		random_deposit = {
			limit = {
				or = {
					is_deposit_type = hfe_deposit_features_human_2_extended_industrial_0
					is_deposit_type = hfe_deposit_features_human_2_extended_industrial_1
					is_deposit_type = hfe_deposit_features_human_2_extended_industrial_2
				}
			}
			custom_tooltip = hfe_decision_features_human_2_extended_fix_inequality_tooltip
		}
	}
	ai_weight = {
		weight = 1
	}
}

hfe_decision_features_human_2_extended_fix_ozone = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_politics
	enactment_time = 365
	resources = {
		category = decisions
		cost = {
			unity = 250
			energy = 1000
		}
	}
	potential = {
		has_modifier = hfe_features_human_2_extended_ozone
	}
	effect = {
		remove_modifier = hfe_features_human_2_extended_ozone
		add_deposit = hfe_deposit_features_human_2_extended_habitability_0
	}
	ai_weight = {
		weight = 1
	}
}

hfe_decision_features_honored_elders_visit = {
	owned_planets_only = yes
	sound = event_bad_omen
	icon = decision_art_monument
	resources = {
		category = decisions
		cost = {
			influence = 10
		}
	}
	potential = {
		exists = owner
		owner = {
			has_valid_civic = hfe_civic_features_honored_elders
		}
	}
	allow = {
		custom_tooltip = {
			fail_text = hfe_decision_features_honored_elders_visit.tooltip_fail.0
			not = {
				has_modifier = hfe_modifier_features_honored_elders_visit_cooldown
			}
		}
		custom_tooltip = {
			fail_text = hfe_decision_features_honored_elders_visit.tooltip_fail.1
			owner = {
				check_variable = {
					which = hfe_features_honored_elders_experience
					value >= 500
				}
			}
		}
	}
	effect = {
		hfe_effect_features_honored_elders_visit = yes
	}
	ai_weight = {
		weight = 1
	}
}
